---
const personalImageAlt = "Amilcar Barahona"
import Badge from "@/components/Badge.astro"
import LinkedInIcon from "@/components/icons/LinkedIn.astro"
import MailIcon from "@/components/icons/Mail.astro"
import SocialPill from "@/components/SocialPill.astro"
---

<div>
  <div class="flex gap-4 mb-4">
    <img
      class="rounded-full shadow-lg size-16"
      src="/amilcar.webp"
      alt={personalImageAlt}
    />
    <a
      href="https://www.linkedin.com/in/amilcar-barahona/?locale=es_ES"
      target="_blank"
      rel="noopener"
      class="flex items-center transition md:justify-center md:hover:scale-105"
      id="badge-linkedin-link"
    >
      <Badge>
        <span data-translate="hero.badge">Available for work</span>
      </Badge>
    </a>
  </div>
  <h1
    class="text-4xl font-bold tracking-tight text-gray-800 sm:text-5xl dark:text-white"
    data-translate="hero.name"
  >
    Amilcar Barahona
  </h1>
  <h2
    class="mt-2 text-xl text-gray-800 dark:[&>strong]:text-blue-600 [&>strong]:text-blue-500 [&>strong]:font-semibold dark:text-gray-300"
    data-translate="hero.title"
    data-translate-html
  >
    <strong>Software Engineer</strong>
  </h2>
  <p
    class="mt-6 text-xl text-gray-800 dark:[&>strong]:text-blue-600 [&>strong]:text-blue-500 [&>strong]:font-semibold dark:text-gray-300"
    data-translate="hero.description"
    data-translate-html
  >
    With 10 years of software development expertise built through continuous self-directed learning, I have spearheaded transformative technical initiatives that deliver measurable business impact.
  </p>
   <p
    class="mt-6 text-xl text-gray-800 dark:[&>strong]:text-blue-600 [&>strong]:text-blue-500 [&>strong]:font-semibold dark:text-gray-300"
    data-translate="hero.description_2"
    data-translate-html
  >
    The current AI revolution presents critical opportunities that demand strategic focus and attention. 
  </p>
  <nav class="flex flex-wrap gap-4 mt-8">
    <SocialPill href="mailto:amilcar.laniakea@gmail.com">
      <MailIcon class="size-4" />
      <span data-translate="hero.contact">Contact me</span>
    </SocialPill>
    <SocialPill href="https://www.linkedin.com/in/amilcar-barahona/?locale=es_ES" id="linkedin-link">
      <LinkedInIcon class="size-4" />
      <span data-translate="hero.linkedin">LinkedIn</span>
    </SocialPill>
    <SocialPill href="/amilcar_barahona_es_ve.pdf" id="cv-download-link">
      <LinkedInIcon class="size-4" />
      <span data-translate="hero.downloadCV">Download CV</span>
    </SocialPill>
  </nav>
</div>

<script>
  function updateDynamicLinks() {
    const cvLink = document.getElementById('cv-download-link');
    const linkedinLink = document.getElementById('linkedin-link');
    const badgeLinkedinLink = document.getElementById('badge-linkedin-link');
    
    // Get current language from localStorage or default to 'es'
    const currentLanguage = localStorage.getItem('language') || 
                           (navigator.language.startsWith('es') ? 'es' : 'en');
    
    // Update the CV link based on language
    if (cvLink) {
      const pdfFile = currentLanguage === 'es' 
        ? '/amilcar_barahona_es_ve.pdf' 
        : '/amilcar_barahona_en_ve.pdf';
      
      cvLink.setAttribute('href', pdfFile);
    }
    
    // Update the LinkedIn links based on language
    const linkedinUrl = currentLanguage === 'es'
      ? 'https://www.linkedin.com/in/amilcar-barahona/?locale=es_ES'
      : 'https://www.linkedin.com/in/amilcar-barahona/?locale=en_US';
    
    if (linkedinLink) {
      linkedinLink.setAttribute('href', linkedinUrl);
    }
    
    if (badgeLinkedinLink) {
      badgeLinkedinLink.setAttribute('href', linkedinUrl);
    }
  }

  // Update links when page loads
  document.addEventListener('DOMContentLoaded', updateDynamicLinks);
  
  // Listen for language changes
  document.addEventListener('languageChanged', updateDynamicLinks);
  
  // Also update when storage changes (in case language is changed in another tab)
  window.addEventListener('storage', function(e) {
    if (e.key === 'language') {
      updateDynamicLinks();
    }
  });
</script>
